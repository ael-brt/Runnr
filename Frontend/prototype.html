<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Sauvegarde US#4</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        input { font-size: 1.2em; padding: 10px; width: 300px; }
        button { font-size: 1.2em; padding: 10px; margin-left: 10px; }
        p { color: #555; }
    </style>
</head>
<body>

    <h1>Mon Application de Course</h1>
    <p>
        Modifiez vos informations (ex: "Mon profil utilisateur" ou "Ma dernière course: 10km").
        <br>
        Sauvegardez, puis fermez l'onglet et ré-ouvrez ce fichier.
    </p>

    <div>
        <input type="text" id="infoInput" placeholder="Entrez vos infos ici...">
        <button id="saveButton">Sauvegarder</button>
    </div>
    
    <p id="statusMessage" style="color: green;"></p>

    <script>
        // ************************************************
        // * VOS FONCTIONS (LE CODE DE VOTRE MISSION)
        // ************************************************
        
        // Clé unique pour le stockage de vos infos
        const INFO_KEY = 'runnerInfo'; // On n'enregistre qu'une info

        /**
         * Sauvegarde la donnée utilisateur dans la mémoire locale.
         * @param {string} data - L'information à sauvegarder.
         */
        function saveHistory(data) {
            console.log("Sauvegarde:", data);
            // C'est aussi simple que ça. Pas besoin de JSON si c'est une seule chaîne.
            localStorage.setItem(INFO_KEY, data);
        }

        /**
         * Charge la donnée utilisateur depuis la mémoire locale.
         * @returns {string | null} - L'info, ou null si rien n'est trouvé.
         */
        function loadHistory() {
            const data = localStorage.getItem(INFO_KEY);
            console.log("Chargé:", data);
            return data;
        }


        // ************************************************
        // * CODE DE L'APPLICATION (POUR FAIRE MARCHER L'INPUT)
        // ************************************************

        const input = document.getElementById('infoInput');
        const saveBtn = document.getElementById('saveButton');
        const statusMsg = document.getElementById('statusMessage');

        // ÉTAPE 1: "Quand je me reconnecte à l'app..."
        // S'exécute au chargement de la page
        document.addEventListener('DOMContentLoaded', () => {
            const savedData = loadHistory();
            
            if (savedData) {
                // "... que mes informations soient sauvegardées"
                input.value = savedData;
                statusMsg.textContent = "Données précédentes chargées.";
            } else {
                statusMsg.textContent = "Aucune donnée sauvegardée.";
            }
        });


        // ÉTAPE 2: L'utilisateur modifie et sauvegarde
        saveBtn.addEventListener('click', () => {
            const currentData = input.value;
            saveHistory(currentData);
            
            statusMsg.textContent = "Données sauvegardées ! Vous pouvez quitter.";
            
            // Si vous voulez vraiment simuler "quitter", vous pouvez
            // fermer la fenêtre (mais c'est souvent bloqué par les navigateurs)
            // window.close(); 
        });

    </script>

</body>
</html>